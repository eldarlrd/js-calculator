(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();const l=document.getElementById("formula"),o=document.getElementById("display"),d=Array.from(document.getElementsByClassName("number")),u=Array.from(document.getElementsByClassName("operator")),p=document.getElementById("single-clear"),h=document.getElementById("clear"),f=document.getElementById("equals"),m=1e12;class O{constructor(e,s){this.formulaElement=e,this.displayElement=s,this.clearNext=!1,this.allClear()}allClear(){this.prevOperand="",this.currOperand="0",this.operator=null,this.clearNext=!1,this.updateDisplay()}clear(){this.clearNext&&(this.clearNext=!1,this.currOperand="0"),(isNaN(this.currOperand)||this.currOperand.includes("E+"))&&(this.currOperand="0"),this.currOperand=this.currOperand.length===1?"0":this.currOperand.slice(0,-1),this.updateDisplay()}appendNumber(e){if(this.clearNext&&(this.clearNext=!1,this.currOperand="0"),e==="."&&this.currOperand==="")this.currOperand="0.";else{if(e==="."&&this.currOperand.includes("."))return;this.currOperand=(this.currOperand.toString()+e.toString()).slice(0,13)}this.updateDisplay()}chooseOperation(e){this.currOperand!==""&&(this.prevOperand&&this.calculate(),this.operator=e.replace("*","×").replace("/","÷"),this.prevOperand=this.currOperand,this.currOperand="",this.updateDisplay())}calculate(){const e=+this.prevOperand,s=+this.currOperand;let r;if(!(isNaN(e)||isNaN(s))){switch(this.operator){case"+":r=e+s;break;case"-":r=e-s;break;case"×":r=e*s;break;case"÷":r=e/s;break;case"%":r=e%s;break;default:return}Math.abs(r)>=m?this.currOperand=r.toExponential(5):this.currOperand=~~r===r?r.toString():+r.toFixed(6),this.prevOperand="",this.operator=null,this.clearNext=!0,this.updateDisplay()}}formatNumber(e){if(isNaN(e))return;const[s,r]=e.toString().split("."),t=+s.toLocaleString("en",{maximumFractionDigits:0});return r!==void 0?`${t}.${r}`:t}updateDisplay(){this.displayElement.innerText=this.formatNumber(this.currOperand),this.formulaElement.innerText=this.operator?`${this.formatNumber(this.prevOperand)} ${this.operator}`:""}}const n=new O(l,o);d.forEach(a=>{a.addEventListener("click",()=>{n.appendNumber(a.innerText)})});u.forEach(a=>{a.addEventListener("click",()=>{n.chooseOperation(a.innerText)})});p.addEventListener("click",()=>n.clear());h.addEventListener("click",()=>n.allClear());f.addEventListener("click",()=>n.calculate());document.addEventListener("keydown",a=>{const{key:e}=a;(/^\d/.test(e)||e===".")&&(a.preventDefault(),n.appendNumber(e)),/[+\-*/%]/.test(e)&&(a.preventDefault(),n.chooseOperation(e)),(e==="Enter"||e==="=")&&(a.preventDefault(),n.calculate()),e==="Backspace"&&(a.preventDefault(),n.clear()),e==="Delete"&&(a.preventDefault(),n.allClear())});console.log('"Obvious" is the most dangerous word in mathematics.');
